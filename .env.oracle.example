# =============================================================================
# RPA AUTOMATION PLATFORM - ENVIRONMENT CONFIGURATION (ORACLE FINANCE VERSION)
# =============================================================================
#
# This is an example configuration file with Oracle Finance as the data warehouse.
# Copy this file to .env and update with your actual values.
#
# For BigQuery version, see .env.example
#

# Application
NODE_ENV=development
APP_PORT=3000

# Encryption
ENCRYPTION_MASTER_KEY=your-32-byte-hex-key-here

# Database (PostgreSQL - for application data)
DATABASE_URL=postgresql://user:password@localhost:5432/rpa_db
DB_HOST=localhost
DB_PORT=5432
DB_NAME=rpa_db
DB_USER=rpa_user
DB_PASSWORD=your-db-password

# =============================================================================
# DATA WAREHOUSE CONFIGURATION
# =============================================================================

# Warehouse Type Selection: 'bigquery' or 'oracle-finance'
# This determines which warehouse will be used by the application
WAREHOUSE_TYPE=oracle-finance

# -----------------------------------------------------------------------------
# OPTION 1: Google BigQuery (if WAREHOUSE_TYPE=bigquery)
# -----------------------------------------------------------------------------
# Commented out when using Oracle Finance
# GCP_PROJECT_ID=your-gcp-project-id
# GCP_KEY_FILE=./credentials/gcp-service-account.json
# BQ_DATASET=rpa_warehouse
# BQ_LOCATION=US
# BQ_BATCH_SIZE=500
# BQ_BATCH_INTERVAL_MS=5000
# BQ_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# OPTION 2: Oracle Finance (if WAREHOUSE_TYPE=oracle-finance)
# -----------------------------------------------------------------------------

# Oracle Database Connection
ORACLE_HOST=your-oracle-host.oraclecloud.com
ORACLE_PORT=1521
ORACLE_SERVICE_NAME=your_service_name
ORACLE_USERNAME=rpa_warehouse_user
ORACLE_PASSWORD=secure_password

# Oracle Wallet (for mutual TLS authentication)
# Download Oracle Wallet from your Oracle Cloud instance
ORACLE_WALLET_PATH=./credentials/oracle-wallet

# Connection Pool Settings
ORACLE_CONNECTION_POOL_MIN=2
ORACLE_CONNECTION_POOL_MAX=10

# Batch Processing Settings
ORACLE_BATCH_SIZE=1000
ORACLE_BATCH_INTERVAL_MS=10000
ORACLE_MAX_RETRIES=3

# Oracle Financials Cloud REST API (Optional - if using GL integration)
# Only needed if posting journal entries directly to Oracle Finance GL
ORACLE_ERP_BASE_URL=https://your-instance.oraclecloud.com
ORACLE_ERP_API_VERSION=v2
ORACLE_CLIENT_ID=your_client_id
ORACLE_CLIENT_SECRET=your_client_secret

# Oracle Finance Specific Settings
ORACLE_LEDGER_ID=300000001234567
ORACLE_BUSINESS_UNIT=US_PRIMARY
ORACLE_CHART_OF_ACCOUNTS_ID=101

# =============================================================================
# END DATA WAREHOUSE CONFIGURATION
# =============================================================================

# Redis (for queue management)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Audit Logging
AUDIT_LOG_DIR=./logs/audit

# AI Models
UI_DETECTOR_MODEL_PATH=file://./models/ui-detector/model.json

# Banking API Configuration
BANKING_API_BASE_URL=https://api.banking-network.example.com
BANKING_API_KEY=your-api-key

# Security
SESSION_SECRET=your-session-secret-here
JWT_SECRET=your-jwt-secret-here
JWT_EXPIRES_IN=1h

# OAuth (if needed)
OAUTH_CLIENT_ID=
OAUTH_CLIENT_SECRET=
OAUTH_REDIRECT_URI=

# Monitoring
ENABLE_MONITORING=true
LOG_LEVEL=info

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File Storage
STORAGE_PATH=./data
TEMP_DIR=./temp

# Email (for notifications)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@rpa-platform.com

# Slack/Teams Integration (optional)
SLACK_WEBHOOK_URL=
TEAMS_WEBHOOK_URL=

# Feature Flags
ENABLE_AI_DETECTION=true
ENABLE_CAPTCHA_SOLVING=false
ENABLE_AUTO_RETRY=true

# External RPA Integrations (Optional)
# UiPath Orchestrator (Enterprise-grade automation)
UIPATH_ORCHESTRATOR_URL=https://cloud.uipath.com/{orgName}/{tenantName}
UIPATH_TENANT_NAME=Default
# Store UiPath credentials in CredentialVault with ID: 'uipath-orchestrator'

# Robocorp Cloud (Cloud-native Python automation)
ROBOCORP_API_URL=https://api.eu1.robocorp.com
ROBOCORP_WORKSPACE_ID=your-workspace-id
ROBOCORP_PROCESS_ID=your-process-id
# Store Robocorp API key in CredentialVault with ID: 'robocorp-api-key'

# Compliance
DATA_RESIDENCY=US
COMPLIANCE_MODE=PCI-DSS
RETENTION_DAYS=90

# =============================================================================
# ORACLE FINANCE SETUP GUIDE
# =============================================================================
#
# 1. PROVISION ORACLE CLOUD INSTANCE
#    - Create Oracle Autonomous Database or Oracle Cloud Infrastructure Database
#    - Download Oracle Wallet for secure connections
#    - Create database user: rpa_warehouse_user
#
# 2. INSTALL DEPENDENCIES
#    npm install oracledb @oracle/oci-sdk
#
# 3. SETUP DATABASE SCHEMA
#    npx tsx server/database/oracle-setup.ts
#
# 4. CONFIGURE CREDENTIALS
#    Option A: Environment variables (shown above)
#    Option B: Store in CredentialVault (recommended for production)
#      await vault.store('oracle-finance-connection', {
#        host: 'oracle-cloud.com',
#        username: 'rpa_warehouse_user',
#        password: 'secure_password',
#        walletPath: './credentials/oracle-wallet'
#      }, { encrypted: true });
#
# 5. TEST CONNECTION
#    npx tsx server/database/test-oracle-connection.ts
#
# 6. MIGRATE DATA (if coming from BigQuery)
#    npx tsx server/database/migrate-bigquery-to-oracle.ts
#
# 7. START APPLICATION
#    WAREHOUSE_TYPE=oracle-finance npm run dev
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# Error: ORA-12541: TNS:no listener
# → Check ORACLE_HOST and ORACLE_PORT are correct
# → Ensure firewall allows connections to port 1521
#
# Error: ORA-01017: invalid username/password
# → Verify ORACLE_USERNAME and ORACLE_PASSWORD
# → Check user has necessary privileges (CONNECT, RESOURCE, CREATE TABLE)
#
# Error: ORA-28759: failure to open file
# → Verify ORACLE_WALLET_PATH points to correct directory
# → Ensure wallet files (ewallet.p12, cwallet.sso) exist
#
# Error: DPI-1047: Cannot locate Oracle Client
# → Install Oracle Instant Client: https://www.oracle.com/database/technologies/instant-client.html
# → Set LD_LIBRARY_PATH (Linux) or PATH (Windows)
#
# Performance Issues:
# → Increase ORACLE_CONNECTION_POOL_MAX
# → Increase ORACLE_BATCH_SIZE to 1000-5000
# → Check Oracle AWR reports for slow queries
# → Verify indexes are created (see oracle-setup.ts)
#
# =============================================================================
